(* Static link test:  Accessing non-local variables
Should print: 99 2 3 10 2 3 2 *)

MODULE Sample;

    VAR globvar : INTEGER;

    PROCEDURE Proc1;

        VAR proc1var : INTEGER;

        PROCEDURE Nested1;
            VAR nestvar : INTEGER;
        BEGIN
            Nested2;
            WriteLn(globvar);
            WriteLn(proc1var);
            nestvar := 10;
            WriteLn(nestvar)
        END Nested1;

        PROCEDURE Nested2;
            VAR nestvar : INTEGER;

            PROCEDURE Nested3;
                VAR nestvar : INTEGER;
            BEGIN
                proc1var := 99
            END Nested3;

        BEGIN
            Nested3;
            WriteLn (proc1var);
            globvar := 2;
            proc1var := 3;
            nestvar := 4
        END Nested2;

    BEGIN
        Nested1;
        WriteLn(globvar);
        WriteLn(proc1var)
    END Proc1;

BEGIN
    Proc1;
    WriteLn(globvar)
END Sample.
